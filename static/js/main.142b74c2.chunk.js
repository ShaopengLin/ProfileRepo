(this["webpackJsonppp-repo"]=this["webpackJsonppp-repo"]||[]).push([[0],{96:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(1),r=n(13),o=n.n(r),c=n(28),s=n(143),u=n(140),l=n(141),h=n(142),d=n(70),p=n.n(d),f=n(98),m=n(138),j=n(153),g=n(139),x=n(76).a.initializeApp({apiKey:"AIzaSyCPeIF6ysksJe5BVemNrbsT3W14Q6S_ZEM",authDomain:"profilepicrepo.firebaseapp.com",projectId:"profilepicrepo",storageBucket:"profilepicrepo.appspot.com",messagingSenderId:"533376832888",appId:"1:533376832888:web:765f036ffd747145a8648d",measurementId:"G-ZBR4J884PC"}),b=n(145),O=n(146),w=n(71),v=n.n(w),y=n(144),k=n(147),U={loggedIn:function(){return null!=x.auth().currentUser},handleLogIn:function(e,t){return x.auth().signInWithEmailAndPassword(e,t).catch((function(e){return new Promise((function(t,n){throw new Error(e.message)}))}))},getEmail:function(){return x.firestore().collection("UserData").doc(x.auth().currentUser.uid).get().then((function(e){if(void 0!==e.data())return e.data().emailValue})).catch((function(e){return new Promise((function(t,n){throw new Error(e.message)}))}))},setEmail:function(e){x.auth().currentUser.updateEmail(e).then((function(){var t=x.firestore().collection("UserData").doc(x.auth().currentUser.uid);x.firestore().runTransaction((function(n){return n.get(t).then((function(a){if(!a.exists)throw"Document does not exist!";n.update(t,{emailValue:e})}))}))})).catch((function(e){}))},getProfileLink:function(){return x.firestore().collection("UserData").doc(x.auth().currentUser.uid).get().then((function(e){if(void 0!==e.data())return e.data().profileLink})).catch((function(e){return new Promise((function(t,n){throw new Error(e.message)}))}))},setProfileLink:function(e){var t=x.firestore().collection("UserData").doc(x.auth().currentUser.uid);x.firestore().runTransaction((function(n){return n.get(t).then((function(a){if(!a.exists)throw"Document does not exist!";n.update(t,{profileLink:e})}))}))},getImageLink:function(){return x.firestore().collection("UserData").doc(x.auth().currentUser.uid).get().then((function(e){return e.data().imageLink}))},setImageLink:function(e){var t=x.firestore().collection("UserData").doc(x.auth().currentUser.uid);x.firestore().runTransaction((function(n){return n.get(t).then((function(a){if(!a.exists)throw"Document does not exist!";n.update(t,{imageLink:e})}))}))}},I=n(17),P=n(150),S=n(154),L=n(69),C=n.n(L),D=function(e){var t=e.url,n=e.handleChange,r=e.handleSetProfile,o=Object(i.useState)(null),s=Object(c.a)(o,2),u=s[0],l=s[1],h=function(){l(null)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(P.a,{id:t+"1",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:h,children:[Object(a.jsx)(S.a,{onClick:function(){r(t),h()},children:"Set As Profile"}),Object(a.jsxs)(S.a,{"aria-label":"More","aria-owns":"long-menu","aria-haspopup":"true",onClick:h,variant:"contained",component:"label",children:["Upload New",Object(a.jsx)("input",{onChange:n,type:"file",accept:"image/*",id:"cameraInput",hidden:!0})]})]}),Object(a.jsx)(C.a,{color:"primary",onClick:function(e){l(e.currentTarget)}})]})},N=Object(m.a)((function(e){return{menu:{"& svg":{fontSize:40}},paper:{height:"100px",width:"100px"},media:{height:"100px"},avatar:{width:"140px",height:"140px",margin:"20px"},nameCard:{display:"flex",alignItems:"center",justifyContent:"left",height:"200px",width:"600px"},nameCardPos:{marginTop:"200px",display:"flex",alignItems:"center",justifyContent:"center"},ImgList:{position:"relative",marginTop:"20px",display:"flex",alignItems:"center",justifyContent:"center"},gridList:{transform:"translate(-30px, 0px)",width:600,height:400},addPhoto:{transform:"translate(-50px, -170px)"},subBlocks:{position:"relative,"},editPhoto:{position:"absolute"},deletePhoto:{position:"absolute"}}}));var B=function(){for(var e=Object(I.e)(),t=Object(i.useState)(),n=Object(c.a)(t,2),r=(n[0],n[1]),o=Object(i.useState)(""),d=Object(c.a)(o,2),m=d[0],w=d[1],P=Object(i.useState)([]),S=Object(c.a)(P,2),L=S[0],C=S[1],B=function(e){w(e),U.setProfileLink(e)},E=[],z=N().paper,A=1;A<7;A++)E.push(Object(a.jsx)(g.a,{className:z,elevation:5}));var T=function(e){if(null!=e.target.files[0]){var t=x.storage().ref(x.auth().currentUser.uid+"/"+e.target.files[0].name).put(e.target.files[0]);t.on("state_changed",(function(e){}),(function(e){}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){var t=[];t.push({url:e,index:L.length}),t=L.concat(t),C(t),U.setImageLink(t),r(null)}))}))}};return Object(i.useEffect)((function(){x.auth().currentUser&&x.firestore().collection("UserData").doc(x.auth().uid)&&(U.getImageLink().then((function(e){C(e)})),U.getProfileLink().then((function(e){w(e)})))}),[]),Object(a.jsxs)("div",{className:N().menu,children:[Object(a.jsx)(u.a,{position:"static",children:Object(a.jsxs)(l.a,{children:[Object(a.jsx)(h.a,{className:N().menu,edge:"start",color:"inherit","aria-label":"menu",children:Object(a.jsx)(p.a,{})}),Object(a.jsx)(f.a,{variant:"h6",style:{flexGrow:1,fontSize:"30px"},children:"Profile Pictures Repository"}),Object(a.jsx)(s.a,{color:"inherit",style:{fontSize:"30px"},onClick:function(){x.auth().signOut().then((function(){e.push("/")}))},children:"Sign Out"})]})}),Object(a.jsx)("div",{className:N().nameCardPos,children:Object(a.jsx)(g.a,{className:N().nameCard,elevation:6,children:Object(a.jsx)(j.a,{className:N().avatar,alt:"Remy Sharp",src:m})})}),Object(a.jsxs)("div",{className:N().ImgList,children:[Object(a.jsxs)(y.a,{color:"primary",className:N().addPhoto,component:"label",children:[Object(a.jsx)("input",{onChange:T,type:"file",accept:"image/*",id:"cameraInput",hidden:!0}),Object(a.jsx)(v.a,{})]}),Object(a.jsx)(b.a,{cellHeight:130,className:N().gridList,cols:3,children:L.map((function(e){return Object(a.jsxs)(O.a,{cols:e.cols||1,id:e.url,children:[Object(a.jsx)("img",{src:e.url,alt:"ok"}),Object(a.jsx)(k.a,{style:{marginBottom:"83px"},actionIcon:Object(a.jsx)(h.a,{children:Object(a.jsx)(D,{url:e.url,handleChange:T,handleSetProfile:B})})})]},e.url)}))})]})]})},E=n(152),z=n(151),A=n(148),T=n(149),V=n(75),W=n.n(V),F=n(72),H=n(73),J=n(34),R=n(74),M=Object(R.a)("userProps"),q=function(){function e(){var t=this;Object(F.a)(this,e),Object.defineProperty(this,M,{writable:!0,value:{emailValue:"default@gmail.com",password:"",imageLink:[],profileLink:"https://firebasestorage.googleapis.com/v0/b/profilepicrepo.appspot.com/o/default-user-icon-4.jpg?alt=media&token=a1a0114e-08a4-4771-8448-fc4440e418f5"}}),this.createUserInDB=function(){return x.firestore().collection("UserData").get().then((function(e){x.firestore().collection("UserData").doc(x.auth().currentUser.uid).set(Object(J.a)(t,M)[M])}))},this.handleSignUp=function(){return x.auth().createUserWithEmailAndPassword(Object(J.a)(t,M)[M].emailValue,Object(J.a)(t,M)[M].password).then((function(){if(null!=x.auth().currentUser)return x.storage().ref(x.auth().currentUser.uid+"/dog.png").put("https://picsum.photos/id/237/200/300"),t.createUserInDB()})).catch((function(e){return new Promise((function(t,n){throw new Error(e.message)}))}))}}return Object(H.a)(e,[{key:"email",get:function(){return Object(J.a)(this,M)[M].emailValue},set:function(e){Object(J.a)(this,M)[M].emailValue=e}},{key:"password",get:function(){return Object(J.a)(this,M)[M].password},set:function(e){Object(J.a)(this,M)[M].password=e}}]),e}();var G=function(){var e=Object(i.useState)(new q),t=Object(c.a)(e,2),n=t[0],r=(t[1],Object(i.useState)("")),o=Object(c.a)(r,2),u=o[0],l=o[1],h=Object(i.useState)(""),d=Object(c.a)(h,2),p=d[0],f=d[1],m=Object(I.e)();return Object(a.jsxs)("div",{className:"login",style:{height:"700px",width:"200px",position:"absolute",left:"50%",top:"70%",transform:"translate(-50%, -50%)"},children:[Object(a.jsx)(E.a,{htmlFor:"input-with-icon-adornment",children:"Email"}),Object(a.jsx)(z.a,{className:"mailF",id:"input-with-icon-adornment",startAdornment:Object(a.jsx)(A.a,{position:"start",children:Object(a.jsx)(T.a,{})}),type:"text",autofocus:!0,required:!0,value:u,onChange:function(e){n.email=e.target.value,l(e.target.value)},style:{marginBottom:"20px"}}),Object(a.jsx)(E.a,{htmlFor:"input-with-icon-adornment",children:"Password"}),Object(a.jsx)(z.a,{className:"passF",id:"input-with-icon-adornment",startAdornment:Object(a.jsx)(A.a,{position:"start",children:Object(a.jsx)(W.a,{})}),type:"password",required:!0,value:p,onChange:function(e){n.password=e.target.value,f(e.target.value)},style:{marginBottom:"20px"}}),Object(a.jsx)(s.a,{className:"lButton",variant:"contained",color:"primary",size:"large",style:{fontSize:"2em",maxWidth:"200px",maxHeight:"70px",minWidth:"200px",minHeight:"70px",marginBottom:"20px"},onClick:function(){U.handleLogIn(u,p).then((function(){m.push("/interface")})).catch((function(e){console.log(e.message)}))},children:"Login"}),Object(a.jsxs)(s.a,{className:"SButton",variant:"contained",color:"primary",size:"large",style:{fontSize:"2em",maxWidth:"200px",maxHeight:"70px",minWidth:"200px",minHeight:"70px"},onClick:function(){n.handleSignUp().then((function(){U.handleLogIn(u,p).then((function(){m.push("/interface")})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))},children:[" ","Sign Up"," "]})]})},Z=n(53);var _=function(){return Object(a.jsx)(Z.a,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(I.a,{path:"/",exact:!0,component:G}),Object(a.jsx)(I.a,{path:"/Interface",exact:!0,component:B})]})})};o.a.render(Object(a.jsx)("div",{children:Object(a.jsx)(_,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.142b74c2.chunk.js.map